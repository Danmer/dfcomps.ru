<mat-card class="validation-table-card">
  <ng-container *ngIf="cupValidationInfo$ | async as cupValidationInfo; else isLoading">
    <div class="card-header">VQ3 Demos for {{ cupValidationInfo.cupInfo.fullName }}</div>
    <ng-container *ngTemplateOutlet="demosList; context: { $implicit: cupValidationInfo.vq3Demos }"></ng-container>
    <div class="card-header">CPM Demos for {{ cupValidationInfo.cupInfo.fullName }}</div>
    <ng-container *ngTemplateOutlet="demosList; context: { $implicit: cupValidationInfo.cpmDemos }"></ng-container>
  </ng-container>
  <ng-template #demosList let-players>
    <div class="validation-table">
      <div class="cell first table-head">Number</div>
      <div class="cell table-head">Player</div>
      <div class="cell table-head">Demos</div>
      <div class="cell table-head">Validation result</div>
      <ng-container *ngFor="let player of players; let i = index">
        <div class="cell first">{{ i + 1 }}</div>
        <div class="cell nick">{{ player.nick }}</div>
        <div class="cell demos">
          <div *ngFor="let demo of player.demos" class="demo-cell">
            <a [href]="demo.demoLink" download>{{ demo.time }}</a>
          </div>
        </div>
        <div class="cell demos">
          <div *ngFor="let demo of player.demos" class="demo-cell">
            <mat-radio-group aria-label="Select an option">
              <mat-radio-button [value]="true" color="primary">Valid</mat-radio-button>
              <mat-radio-button [value]="false" color="primary" class="invalid-radio">Invalid</mat-radio-button>
            </mat-radio-group>
            <span>Reason: </span>
            <input class="reason-input" disabled/>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-template>
  <ng-template #isLoading>
    <div class="spinner">
      <mat-spinner diameter="75" strokeWidth="4" color="accent"></mat-spinner>
    </div>
  </ng-template>
</mat-card>
